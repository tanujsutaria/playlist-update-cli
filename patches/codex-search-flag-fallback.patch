diff --git a/src/scoring.py b/src/scoring.py
index 8aa741b..14b8014 100644
--- a/src/scoring.py
+++ b/src/scoring.py
@@ -295,6 +295,10 @@ class WebSearchScoreProvider(ScoreProvider):
                 if label == "codex" and self._stderr_needs_tty(result.stderr):
                     logger.info("Retrying %s with codex exec (non-interactive)", label)
                     return self._run_command(label, "codex exec -", payload)
+                if label == "codex" and self._stderr_unknown_argument(result.stderr):
+                    logger.info("Retrying %s without unsupported codex flags", label)
+                    stripped = self._strip_flag(args, "--search", takes_value=False)
+                    return self._run_command(label, " ".join(stripped), payload)
             return {}
 
         try:
@@ -334,6 +338,28 @@ class WebSearchScoreProvider(ScoreProvider):
         lowered = (stderr or "").lower()
         return "stdin is not a terminal" in lowered
 
+    @staticmethod
+    def _stderr_unknown_argument(stderr: str) -> bool:
+        lowered = (stderr or "").lower()
+        return "unexpected argument" in lowered
+
+    @staticmethod
+    def _strip_flag(args: List[str], flag: str, takes_value: bool) -> List[str]:
+        if flag not in args:
+            return args
+        cleaned: List[str] = []
+        skip_next = False
+        for arg in args:
+            if skip_next:
+                skip_next = False
+                continue
+            if arg == flag:
+                if takes_value:
+                    skip_next = True
+                continue
+            cleaned.append(arg)
+        return cleaned
+
     def score_candidates(self, candidates: Sequence[Song], profile: PlaylistProfile) -> Dict[str, float]:
         if not self.commands:
             return {}
diff --git a/src/web_search.py b/src/web_search.py
index 06f6507..3c67174 100644
--- a/src/web_search.py
+++ b/src/web_search.py
@@ -262,6 +262,11 @@ def _run_command(label: str, command: str, payload: dict, timeout_sec: int) -> T
                 logger.info("Retrying %s with codex exec (non-interactive)", label)
                 args, input_text = _prepare_codex_command(["codex", "exec", "-"], payload)
                 return _run_command(label, " ".join(args), payload, timeout_sec)
+            if label == "codex" and _stderr_unknown_argument(result.stderr):
+                logger.info("Retrying %s without unsupported codex flags", label)
+                args = _strip_flag(args, "--search", takes_value=False)
+                args = _strip_flag(args, "--output-schema", takes_value=True)
+                return _run_command(label, " ".join(args), payload, timeout_sec)
         return [], ""
 
     output = _parse_json_output(result.stdout)
@@ -314,6 +319,11 @@ def _stderr_needs_tty(stderr: str) -> bool:
     return "stdin is not a terminal" in lowered
 
 
+def _stderr_unknown_argument(stderr: str) -> bool:
+    lowered = (stderr or "").lower()
+    return "unexpected argument" in lowered
+
+
 def _parse_json_output(text: str) -> Optional[object]:
     if text:
         candidate = text.strip()
@@ -382,6 +392,23 @@ def _extract_json_block(text: str, open_char: str, close_char: str) -> Optional[
     return text[start : end + 1].strip()
 
 
+def _strip_flag(args: List[str], flag: str, takes_value: bool) -> List[str]:
+    if flag not in args:
+        return args
+    cleaned: List[str] = []
+    skip_next = False
+    for idx, arg in enumerate(args):
+        if skip_next:
+            skip_next = False
+            continue
+        if arg == flag:
+            if takes_value:
+                skip_next = True
+            continue
+        cleaned.append(arg)
+    return cleaned
+
+
 def _extract_output(output: object) -> Tuple[List[dict], str]:
     results: Iterable = []
     summary = ""
